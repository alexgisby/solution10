<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<title>Collection &bull; Solution 10 Library Docs</title>
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<meta name="description" content="Documentation for the Solution 10 Library">
	
		<!-- Le styles -->
		<link href="bootstrap/css/bootstrap.css" rel="stylesheet">
		<style type="text/css">
		body {
		padding-top: 60px;
		padding-bottom: 40px;
		}
		.sidebar-nav {
		padding: 9px 0;
		}
		</style>
		<link href="google-code-prettify/prettify.css" rel="stylesheet">
	
		<!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
		<!--[if lt IE 9]>
			<script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
		<![endif]-->
	</head>

	<body onload="prettyPrint();">

		<div class="navbar navbar-fixed-top">
			<div class="navbar-inner">
				<div class="container-fluid">
					<a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
					</a>
					<a class="brand" href="#">lib.Solution10</a>
					<div class="nav-collapse">
						<ul class="nav">
							<li><a href="index.html">Introduction</a></li>
							<li><a href="installation.html">Installation</a></li>
							<li class="divider-vertical"></li>
							<li class="active"><a href="collection.html">Collection</a></li>
							<li><a href="csv.html">CSV</a></li>
						</ul>
					</div><!--/.nav-collapse -->
				</div>
			</div>
		</div>

		<div class="container-fluid">
	
			<div class="page-header">
				<h1>Collection <small>Like Arrays. Only better.</small></h1>
			</div>
			
			<div class="row-fluid">
				<div class="span9">
					<h2 id="introduction">What is a Collection?</h2>
					<p>
						Collections, at their core, are implementations of Iterator, ArrayAccess and Countable. But they're
						also a lot more than that. Collections allow you to splice your array and return a subset, just by
						passing a special key.
					</p>
					
					<h2 id="basics">Creating and Populating</h2>
					<p>Creating an instance of Collection is simple:</p>
					<pre class="prettyprint">
// Create a new, empty collection:
$collection = new Solution10\Collection\Collection();

// Create a collection from an array:
$collection = new Solution10\Collection\Collection(array('Hello', 'World'));</pre>
					
					<p>To add items into the collection, you simply use the same syntax you would an array:</p>
					
					<pre class="prettyprint">
$collection = new Solution10\Collection\Collection();
$collection[] = 'Hello';
$collection[] = 'Beautiful';
$collection[20] = 'World';

/*
	Will result in a collection that looks like:
	(
		0 => 'Hello',
		1 => 'Beautiful',
		20 => 'World'
	)
*/</pre>

					<div class="alert alert-info">
						<i class="icon-info-sign"></i>
						To keep the docs brief, from now on we'll assume your using the
						Solution10\Collection namespace in the file like so:
						<pre class="prettyprint">use \Solution10\Collection;</pre>
					</div>

					<p>You can overwrite elements in the array just like you would a normal array:</p>
					
					<pre class="prettyprint">$collection = new Collection();
$collection[] = 'Hello';
$collection[] = 'World';

// Change the first item to Goodbye:
$collection[0] = 'Goodbye';</pre>

					<p>And finally, unset() works exactly how you would imagine, removing an item from the collection.</p>

					<pre class="prettyprint">$collection = new Collection();
$collection[] = 'Hello';
$collection[] = 'World';
unset($collection[1]);

// Collection now just contains 'Hello'</pre>
					
					<h2>Looping and Counting</h2>
					
					<p>Collections act like arrays in a tonne of circumstances, and looping and counting is one of them.</p>
					
					<p>To loop (or iterate) over a collection, just use a foreach:</p>
					
					<pre class="prettyprint">$collection = new Collection();
$collection['name'] = 'Alex';
$collection['role'] = 'Admin';

foreach($collection as $key => $value)
{
	echo $key . ': ' . $value . PHP_EOL;
}

// The above will output:
// name: Alex
// role: Admin</code></pre>

					<p>To count how many items are in a collection, we can use count():</p>
					
					<pre class="prettyprint">$collection = new Collection(array('Apple', 'Orange', 'Banana', 'Grapes'));
echo count($collection); // Outputs 4</pre>


					<h2 id="splicing">Splicing</h2>
					
					<p>Splicing allows you to quickly retrieve a subset of the collection based on its numeric indexes. If it's numerically indexed that is.</p>
					
					<h3 id="splicing-basics">Basic Splicing</h3>
					
					<p>Splicing involves accessing a key in the Collection of the format <code>start:end</code> where start and end are numeric indexes in the collection.</p>
					
					<div class="alert alert-info">
						<i class="icon-info-sign"></i>
						<strong>Splicing is 1-indexed!</strong><br />
						So asking for 1:1 will grab the first element. 1:2 will grab the first two elements. etc
					</div>
					
					<pre class="prettyprint">
$collection = new Collection(array('Apple', 'Orange', 'Banana'));
$subset = $collection['1:2'];

// $subset is now: array('Apple', 'Orange')</pre>
					
					<p>Collections allow for 'over-the-end' splicing, where if the end index is greater than the length, it'll just take everything up to the end:</p>
					<pre class="prettyprint">
$collection = new Collection(array('Apple', 'Orange', 'Banana'));
$subset = $collection['1:100'];

// $subset</code> contains array('Orange', 'Banana')</pre>

					<p>
						You can use negative splicing too to grab elements from the end of the Collection. The Collection will count backwards the number
						of negative steps and start counting from there.
					</p>
					
					<pre class="prettyprint">
$collection = new Collection(array('Apple', 'Orange', 'Banana'));
$subset = $collection['-2:2'];
					
// $subset contains ('Orange', 'Banana')</pre>

					<div class="alert alert-info">
						<i class="icon-info-sign"></i>
						Note that the <code>end</code> index is still counted from the start of the array! You should instead use the <code>END</code> keyword
						outlined below to grab say the last three elements of the collection.
					</div>

					<h3 id="splicing-keywords">Splicing Keywords</h3>
					
					<p>
						Sometimes you won't know how many items are in the Collection, or just want to make it explicit that you want everything after a certain
						point. For this, you should use the <code>END</code> keyword.
					</p>
					
					<pre class="prettyprint">
$collection = new Collection(array('Apple', 'Orange', 'Banana', 'Grapes'));
$subset = $collection['2:END'];

// $subset contains ('Orange', 'Banana', 'Grapes')</pre>

					<p>There's also a shortcut to fetching the last item in the collection, the <code>LAST</code> keyword:</p>
					
					<pre class="prettyprint">
$collection = new Collection(array('Apple', 'Orange', 'Banana', 'Grapes'));
$subset = $collection[':LAST'];

// $subset is simply array('Grapes')</pre>

					<h3 id="splicing-exceptions">Splicing Exceptions</h3>
					
					<p>The following table is the Exceptions which can be thrown by Collection around splicing:</p>
					
					<table class="table table-striped table-bordered">
						<thead>
							<tr>
								<th>Exception</th>
								<th>Reason</th>
							</tr>
						</thead>
						<tbody>
							<tr>
								<td>Solution10\Collection\Exception\Bounds</td>
								<td>
									<ul>
										<li>Asking for a <code>start</code> value greater than the count() of the Collection</li>
										<li>Asking for a <code>start</code> index greater than <code>end</code></li>
									</ul>
								</td>
							</tr>
							<tr>
								<td>Solution10\Collection\Exception\Index</td>
								<td>
									<ul>
										<li>Asking for an unknown index</li>
									</ul>
								</td>
							</tr>
						</tbody>
					</table>

					<h2 id="sorting">Sorting</h2>
					
					<p>
						Collections allow you to sort their contents just like they are real arrays. You can also sort by a property of the items within
						the collection! Basics first.
					</p>
					
					<h3 id="sorting-basic">Sorting Basics</h3>
					
					<p>Sorting uses the same flags as PHP's <a href="http://php.net/sort">sort() family</a> of functions.</p>
					
					<p>To dictate direction, you need to use the following constants:</p>
					
					<table class="table table-striped table-bordered">
						<thead>
							<tr>
								<th>Constant</th>
								<th>Description</th>
							</tr>
						</thead>
						<tbody>
							<tr>
								<td>Solution10\Collection\Collection::SORT_ASC</td>
								<td>
									Sort the items in Ascending order, rebuilding the keys.
								</td>
							</tr>
							<tr>
								<td>Solution10\Collection\Collection::SORT_DESC</td>
								<td>
									Sort the items in Descending order, rebuilding the keys.
								</td>
							</tr>
							<tr>
								<td>Solution10\Collection\Collection::SORT_ASC_PRESERVE_KEYS</td>
								<td>
									Sort the items in Ascending order, maintaining key => value association.
								</td>
							</tr>
							<tr>
								<td>Solution10\Collection\Collection::SORT_DESC_PRESERVE_KEYS</td>
								<td>
									Sort the items in Descending order, maintaining key => value association.
								</td>
							</tr>
						</tbody>
					</table>
					
					<pre class="prettyprint">
$collection = new Collection(array(100, 50, 70, 10));
$collection->sort(Collection::SORT_ASC);

// $collection's order is now: 10, 50, 70, 100

// You can pass in sort() flags like so:
$collection->sort(Collection::SORT_ASC, SORT_NUMERIC);</pre>

					<h3 id="sorting-member">Sorting by Member</h3>
					
					<p>
						You can sort the contents of a Collection by some data value within the collections contents! This can be either:
						<ul>
							<li>A keyed item in a multi-d array</li>
							<li>A property on all objects in the Collection</li>
							<li>The result of a function call on all objects within the Collection.</li>
						</ul>
					</p>
					
					<p>So, for example:</p>
					
					<pre class="prettyprint">
$collection = new Collection(array(
	array(
		'name' => 'Sarah',
		'job' => 'Manager',
	),
	array(
		'name' => 'Alex',
		'job' => 'Developer',
	),
	array(
		'name' => 'Tracy',
		'job' => 'HR'
	),
));

$collection->sort_by_member('name', Collection::SORT_ASC);

// The collection now has the array('name' => 'Alex' ...) item first and the array('name' => 'Tracy' ...) item last!</pre>

				</div>
				<div class="span3">
					<div class="well sidebar-nav">
						<ul class="nav nav-list">
							<li class="nav-header"><i class="icon-star"></i> Collections</li>
							<li>
								<a href="#introduction">Introduction</a>
							</li>
							<li>
								<a href="#basics">Creating and Populating</a>
							</li>
							<li>
								<a href="#looping">Looping and Counting</a>
							</li>
							<li>
								<a href="#splicing">Splicing</a>
								<ul>
									<li><a href="#splicing-basic">Basic Splicing</a></li>
									<li><a href="#splicing-keyword">Splicing Keywords</a></li>
									<li><a href="#splicing-exceptions">Splicing Exceptions</a></li>
								</ul>
							</li>
							<li>
								<a href="#sorting">Sorting</a>
								<ul>
									<li><a href="#sorting-basic">Sorting Basics</a></li>
									<li><a href="#sorting-member">Sorting by Member</a></li>
								</ul>
							</li>
						</ul>
					</div>
				</div>
			</div>
	
	
			<hr>
			<footer>
				<p>Solution10 is released under the MIT License. Enjoy!</p>
			</footer>
	
		</div><!--/.fluid-container-->

		<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script>
		<script src="bootstrap/js/bootstrap.min.js"></script>
		<script src="google-code-prettify/prettify.js"></script>

	</body>
</html>
